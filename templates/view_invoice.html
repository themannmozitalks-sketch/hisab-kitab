<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ inv.invoice_no }} • Hisab Kitab</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="shell">
    <header class="top">
      <div>
        <div class="title">Invoice {{ inv.invoice_no }}</div>
        <div class="sub">Date: {{ inv.invoice_date }}</div>
      </div>
      <div class="top-actions">
        <a class="btn" href="{{ url_for('index') }}">← Back</a>
        <a class="btn primary" href="{{ url_for('invoice_pdf', invoice_id=inv.id) }}">Download PDF</a>
      </div>
    </header>

    <div class="card">
      <div class="grid2">
        <div>
          <div class="card-head">From</div>
          <div class="kv"><b>{{ inv.from_name }}</b></div>
          {% if inv.from_address %}<div class="kv">Address: {{ inv.from_address }}</div>{% endif %}
          {% if inv.from_email %}<div class="kv">Email: {{ inv.from_email }}</div>{% endif %}
          {% if inv.from_phone %}<div class="kv">Phone: {{ inv.from_phone }}</div>{% endif %}
          {% if inv.from_gstin %}<div class="kv">GSTIN: {{ inv.from_gstin }}</div>{% endif %}
        </div>
        <div>
          <div class="card-head">To</div>
          <div class="kv"><b>{{ inv.to_name }}</b></div>
          {% if inv.to_address %}<div class="kv">Address: {{ inv.to_address }}</div>{% endif %}
          {% if inv.to_email %}<div class="kv">Email: {{ inv.to_email }}</div>{% endif %}
          {% if inv.to_phone %}<div class="kv">Phone: {{ inv.to_phone }}</div>{% endif %}
          {% if inv.to_gstin %}<div class="kv">GSTIN: {{ inv.to_gstin }}</div>{% endif %}
        </div>
      </div>

      {% if inv.place_of_supply %}
        <div class="kv mt10"><b>Place of Supply:</b> {{ inv.place_of_supply }}</div>
      {% endif %}

      <div class="card-head">Items</div>
      <table class="table">
        <thead>
          <tr>
            <th>Description</th>
            <th class="num">Qty</th>
            <th class="num">Rate</th>
            <th class="num">Amount</th>
          </tr>
        </thead>
        <tbody>
          {% for it in items %}
            <tr>
              <td>{{ it.description }}</td>
              <td class="num">{{ "%.2f"|format(it.qty) }}</td>
              <td class="num">{{ "%.2f"|format(it.rate) }}</td>
              <td class="num">{{ "%.2f"|format(it.qty * it.rate) }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="totals">
        <div>Subtotal</div><div class="num">{{ "%.2f"|format(subtotal) }}</div>

        {% if inv.gst_mode == 1 %}
          <div>GST ({{ "%.2f"|format(inv.gst_rate) }}%)</div><div class="num">{{ "%.2f"|format(gst_amount) }}</div>
        {% endif %}

        <div class="grand">TOTAL</div><div class="num grand">{{ "%.2f"|format(total) }}</div>
      </div>

      {% if inv.notes %}
        <div class="card-head">Notes</div>
        <div class="notes">{{ inv.notes }}</div>
      {% endif %}
    </div>

    <footer class="foot">Hisab Kitab • v1</footer>
  </div>
</body>
</html>
